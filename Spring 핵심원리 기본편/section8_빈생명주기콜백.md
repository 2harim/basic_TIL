**ëª©ì°¨**
- [ğŸ“Â ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘](#ë¹ˆ-ìƒëª…ì£¼ê¸°-ì½œë°±-ì‹œì‘)
  - [ìŠ¤í”„ë§ ë¹ˆ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´](#ìŠ¤í”„ë§-ë¹ˆ-ì´ë²¤íŠ¸-ë¼ì´í”„ì‚¬ì´í´)
- [â›³ï¸ ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean](#ï¸-ì¸í„°í˜ì´ìŠ¤-initializingbean-disposablebean)
  - [ë‹¨ì ](#ë‹¨ì )
- [ğŸ‚Â ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ](#ë¹ˆ-ë“±ë¡-ì´ˆê¸°í™”-ì†Œë©¸-ë©”ì„œë“œ)
  - [íŠ¹ì§•](#íŠ¹ì§•)
  - [ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ ](#ì¢…ë£Œ-ë©”ì„œë“œ-ì¶”ë¡ )
- [ğŸ“®Â ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy](#ì• ë…¸í…Œì´ì…˜-postconstruct-predestroy)
  - [íŠ¹ì§•](#íŠ¹ì§•-1)
  - [ê²°ë¡ ](#ê²°ë¡ )

<br>

## ğŸ“Â ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘

*DB ì»¤ë„¥ì…˜ í’€, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“* ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²° ë¯¸ë¦¬ í•˜ê³  ì¢…ë£Œ ì‹œì ì— ì—°ê²° ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—… ì§„í–‰ â†’ **ê°ì²´ ì´ˆê¸°í™”, ì¢…ë£Œ ì‘ì—… í•„ìš”**

```java
package hello.core.lifecycle;

public class NetworkClient {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    public void setUrl(String url) {
        this.url = url;
    }

    //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect " + url);
    }

    public void call(String message) {
        System.out.println("call " + url + " message = " + message);
    }

    //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close " + url);
    }
}
```

**[ì¶œë ¥]**
```bash
ìƒì„±ì í˜¸ì¶œ, url = null
connect null
call null message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
```

ê¸°ë³¸ ìƒì„±ìë¡œ íŒŒë¼ë¯¸í„° ì—†ì´ **ê°ì²´ ìƒì„± í›„ ì„¤ì •**ì„ í•˜ë¯€ë¡œ *url ì •ë³´ ì—†ì´(null) í˜¸ì¶œë¨*

<br>

âœ”ï¸Â **ìŠ¤í”„ë§ ë¹ˆì˜ ê°„ë‹¨í•œ ë¼ì´í”„ ì‚¬ì´í´**

> ê°ì²´ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… (ìƒì„±ì ì£¼ì… ì˜ˆì™¸)
> 

ë”°ë¼ì„œ ì´ˆê¸°í™” ì‘ì—…ì€ ì˜ì¡´ê´€ê³„ ì£¼ì… ëª¨ë‘ ì™„ë£Œëœ í›„ ë‚œ ë‹¤ìŒ í˜¸ì¶œí•´ì•¼ í•¨

ìŠ¤í”„ë§ì€ **ì˜ì¡´ê´€ê³„ ì£¼ì… ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œ** í†µí•´ ì´ˆê¸°í™” ì‹œì  ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì œê³µ

ë˜í•œ **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì§ì „ ì†Œë©¸ ì½œë°±**ì„ ì¤Œ â‡’ *ì•ˆì „í•˜ê²Œ ì¢…ë£Œ ì‘ì—… ì§„í–‰ ê°€ëŠ¥*

<br>

### ìŠ¤í”„ë§ ë¹ˆ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´

`ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ì½œë°± â†’ ì‚¬ìš© â†’ ì†Œë©¸ì „ ì½œë°± â†’ ìŠ¤í”„ë§ ì¢…ë£Œ` 

- ì´ˆê¸°í™” ì½œë°± : ë¹ˆ ìƒì„±, ì˜ì¡´ê´€ê³„ ì£¼ì… í›„ í˜¸ì¶œ
- ì†Œë©¸ì „ ì½œë°± : ë¹ˆ ì†Œë©¸ ì§ì „ í˜¸ì¶œ

> *ê°ì²´ ìƒì„±ê³¼ ì´ˆê¸°í™” ë¶„ë¦¬í•˜ì*
SRP ì›ì¹™! ê°ì²´ ìƒì„±ì€ ìµœëŒ€í•œ ìƒì„±ì—ë§Œ ì§‘ì¤‘í•˜ëŠ” ì±…ì„ë§Œ ë§¡ì
ì´ˆê¸°í™”ëŠ” ìƒì„±ëœ ê°’ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ ì—°ê²°í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•¨ ğŸ˜ 
ì´ˆê¸°í™”ê°€ ë‚´ë¶€ ê°’ ë³€ê²½í•˜ëŠ” ì •ë„ì˜ ë‹¨ìˆœí•œ ê²½ìš° ìƒì„±ìì—ì„œ í•˜ëŠ” ê²ƒì´ ë‚˜ì„ìˆ˜ë„ ìˆìŒ
> 

<br>

## â›³ï¸ ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean

```java
public class NetworkClient implements InitializingBean, DisposableBean {

	...
	@Override
  public void afterPropertiesSet() throws Exception {
      connect();
      call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
  }
	@Override
	public void destroy() throws Exception {
	    disconnect();
	}
	
}
```

InitializingBean 

- `afterPropertiesSet()` : ì˜ì¡´ê´€ê³„ ì£¼ì… ëë‚˜ë©´ í˜¸ì¶œ

DisposableBean 

- `destroy()` : ë¹ˆ ì¢…ë£Œ ì‹œ í˜¸ì¶œ

<br>

**[ì¶œë ¥]**
```bash
ìƒì„±ì í˜¸ì¶œ, url = null
connect http://hello-spring.dev
call http://hello-spring.dev message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
15:28:44.683 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@2ea41516, started on Fri Apr 21 15:28:44 KST 2023
close http://hello-spring.dev
```

<br>

### ë‹¨ì 

ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ â†’ **ìŠ¤í”„ë§ì— ë„ˆë¬´ ì˜ì¡´ì **ì´ê²Œ ë¨

ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ ì´ë¦„ ë³€ê²½ X

ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš© X

â‡’ ì´ˆì°½ê¸° ë‚˜ì˜¨ ë°©ë²•ì´ì–´ì„œ ìµœê·¼ì—ëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤

<br>

## ğŸ‚Â ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ

ì„¤ì • ì •ë³´ì— `@Bean(initMethod = â€œinitâ€, destroyMethod = â€œcloseâ€)` ì™€ ê°™ì´ ì´ˆê¸°í™”/ì†Œë©¸ ë©”ì„œë“œ ì§€ì • ê°€ëŠ¥

```java
public class NetworkClient {

	...

	public void init() {
	        connect();
	        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
	  }
	
	public void close() {
	    disconnect();
	}
}
```

```java
@Configuration
static class LifeCycleConfig {

  @Bean(initMethod = "init", destroyMethod = "close")
  public NetworkClient networkClient() { .. }
}
```

<br>

### íŠ¹ì§•

- ë©”ì„œë“œ ì´ë¦„ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥
- ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´ì  X
- **ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—** ì½”ë“œ ê³ ì¹  ìˆ˜ ì—†ëŠ” *ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬* ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œ ì ìš© ê°€ëŠ¥

<br>

### ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ 

`@Bean` ìœ¼ë¡œ í˜¸ì¶œí•  ë•Œ `destroyMethod` ì†ì„±ì˜ íŠ¹ë³„í•œ ê¸°ëŠ¥ ì¡´ì¬

ê¸°ë³¸ ê°’ì´ `(inferred)` (ì¶”ë¡ ) ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆìŒ

ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ë¶€ë¶„ ì¢…ë£Œ ë©”ì„œë“œ ì´ë¦„ì´ `close` , `shutdown` 

`close` , `shutdown` ì´ë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤Œ! â†’ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œ

ë¹ˆ ê³µë°± ì§€ì •ì‹œ ì¶”ë¡  ê¸°ëŠ¥ êº¼ì¤Œ

<br>

## ğŸ“®Â ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestroy

```java
public class NetworkClient {
	...	
	@PostConstruct
  public void init() {
      connect();
      call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
  }

  @PreDestroy
  public void close() {
      disconnect();
  }
}
```

<br>

### íŠ¹ì§•

- ìµœì‹  ìŠ¤í”„ë§ì—ì„œ ê¶Œê³ í•˜ëŠ” ë°©ë²•
- ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´ ë˜ë¯€ë¡œ í¸ë¦¬
- íŒ¨í‚¤ì§€ `javax.annotaton.PostConstruct` ìŠ¤í”„ë§ì— ì¢…ì†ì ì´ì§€ ì•Šê³  ìë°” í‘œì¤€ì„
    
    â‡’ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ì˜ ë™ì‘
    
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦¼ â† ë¹ˆ ë“±ë¡ì„ ë”°ë¡œ í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ! (@Bean)
- ë‹¨ì ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒ â† ì½”ë“œ ìˆ˜ì • ëª»í•˜ê¸° ë•Œë¬¸ì—

<br>

### ê²°ë¡ 

`@PostConstruct` , `@PreDestroy` ì• ë…¸í…Œì´ì…˜ ì‚¬ìš©

ì½”ë“œ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ˆê¸°í™”/ì¢…ë£Œì‹œ `@Bean` ì˜ `initMethod` , `destroyMethod` ì‚¬ìš©